apiVersion: v1
kind: Pod
metadata:
  annotations:
    etcd.k3s.io/initial: '{"initial-advertise-peer-urls":"https://134.199.165.191:2380","initial-cluster":"w-guard-wg-cp-svtk6-lqtxw-fecd6ae7=https://134.199.165.191:2380","initial-cluster-state":"new"}'
  creationTimestamp: null
  labels:
    component: etcd
    tier: control-plane
  name: etcd
  namespace: kube-system
  uid: 44a6fa0fde16a6d946b1d3b394f93e9f
spec:
  containers:
  - args:
    - --config-file=/var/lib/rancher/rke2/server/db/etcd/config
    command:
    - etcd
    env:
    - name: FILE_HASH
      value: 1f2b565d93802f78c88f9aba36f99a84eea0be3096856e2f4d56e2caf9e63553
    - name: NO_PROXY
      value: .svc,.cluster.local,10.42.0.0/16,10.43.0.0/16
    image: index.docker.io/rancher/hardened-etcd:v3.5.21-k3s1-build20250612
    imagePullPolicy: IfNotPresent
    livenessProbe:
      failureThreshold: 8
      httpGet:
        host: localhost
        path: /health?serializable=true
        port: 2381
        scheme: HTTP
      initialDelaySeconds: 10
      periodSeconds: 10
      timeoutSeconds: 15
    name: etcd
    resources:
      requests:
        cpu: 200m
        memory: 512Mi
    securityContext:
      privileged: false
    startupProbe:
      failureThreshold: 24
      httpGet:
        host: localhost
        path: /health?serializable=true
        port: 2381
        scheme: HTTP
      initialDelaySeconds: 10
      periodSeconds: 10
      timeoutSeconds: 5
    volumeMounts:
    - mountPath: /var/lib/rancher/rke2/server/db/etcd
      name: dir0
    - mountPath: /var/lib/rancher/rke2/server/tls/etcd/server-client.crt
      name: file0
      readOnly: true
    - mountPath: /var/lib/rancher/rke2/server/tls/etcd/server-client.key
      name: file1
      readOnly: true
    - mountPath: /var/lib/rancher/rke2/server/tls/etcd/server-ca.crt
      name: file2
      readOnly: true
    - mountPath: /var/lib/rancher/rke2/server/tls/etcd/peer-server-client.crt
      name: file3
      readOnly: true
    - mountPath: /var/lib/rancher/rke2/server/tls/etcd/peer-server-client.key
      name: file4
      readOnly: true
    - mountPath: /var/lib/rancher/rke2/server/tls/etcd/peer-ca.crt
      name: file5
      readOnly: true
    - mountPath: /var/lib/rancher/rke2/server/db/etcd/config
      name: file6
      readOnly: true
  hostNetwork: true
  priorityClassName: system-cluster-critical
  volumes:
  - hostPath:
      path: /var/lib/rancher/rke2/server/db/etcd
      type: DirectoryOrCreate
    name: dir0
  - hostPath:
      path: /var/lib/rancher/rke2/server/tls/etcd/server-client.crt
      type: File
    name: file0
  - hostPath:
      path: /var/lib/rancher/rke2/server/tls/etcd/server-client.key
      type: File
    name: file1
  - hostPath:
      path: /var/lib/rancher/rke2/server/tls/etcd/server-ca.crt
      type: File
    name: file2
  - hostPath:
      path: /var/lib/rancher/rke2/server/tls/etcd/peer-server-client.crt
      type: File
    name: file3
  - hostPath:
      path: /var/lib/rancher/rke2/server/tls/etcd/peer-server-client.key
      type: File
    name: file4
  - hostPath:
      path: /var/lib/rancher/rke2/server/tls/etcd/peer-ca.crt
      type: File
    name: file5
  - hostPath:
      path: /var/lib/rancher/rke2/server/db/etcd/config
      type: File
    name: file6
status: {}
